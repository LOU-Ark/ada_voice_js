
# インタラクティブ・ペルソナ・エディター

AIを活用して詳細なキャラクターペルソナを作成、管理、対話できる先進的なWebアプリケーションです。React、TypeScript、そしてGoogle Gemini APIで構築されており、作家、ゲーム開発者、そして趣味で創作活動を行う人々がキャラクターに命を吹き込むための包括的なスイートを提供します。

## ✨ 機能

### ペルソナ管理
- **作成と編集:** キャラクターの名前や役割から、性格や世界観に至るまで、ペルソナのあらゆる側面を定義・修正するための豊富なインターフェース。
- **ペルソナ一覧:** 作成したすべてのペルソナを、アクセスしやすいクリーンなカードベースのレイアウトで表示。
- **削除:** 不要になったペルソナを簡単に削除。

### AIによる作成と調整
- **トピックから作成:** 「陽気な宇宙海賊の船長」のようなコンセプトを提示するだけで、AIがGoogle検索で情報を収集し、詳細なパラメータを持つ完全なペルソナを生成します。
- **ファイルから作成:** `.txt`形式のキャラクターシートをアップロードすると、AIがそれを知的に解析し、ペルソナのパラメータを自動的に入力します。
- **AIサマリー:** 定義されたパラメータに基づいて、ペルソナの魅力的で物語性のある要約を生成。要約を編集し、その変更をAIにパラメータへ反映させることも可能です。
- **AIチャットで調整:** AIアシスタントとの対話を通じてペルソナを微調整。「彼女をもっと皮肉屋にして」「彼にエンジニアリングの経歴を与えて」といった指示を出すだけで、パラメータがリアルタイムで更新されるのを確認できます。

### 対話とテスト
- **テストチャット:** エディター内の専用チャットパネルで、ペルソナの口調や性格を即座にテスト。
- **プロダクションチャット:** フルスクリーンのチャットインターフェースに切り替え、作成した任意のペルソナとより長い会話を楽しめます。
- **テキスト読み上げ (TTS):** キャラクターの応答を音声で聞き、命を吹き込みます。高品質なカスタム音声合成のために、Fish Audio APIと連携。
- **音声管理:** TTS機能のために、複数のカスタム音声を追加・管理。
- **音声入力 (STT):** マイクを使ってペルソナと話すことで、より自然で没入感のあるチャット体験を実現。

### バージョン管理
- **履歴追跡:** ペルソナを保存するたびに新しいバージョンが作成されます。AIが変更点の簡潔な要約（例：「性格をより皮肉なものに調整」）を生成します。
- **変更の復元:** バージョン履歴を簡単に閲覧し、ワンクリックでペルソナを以前の状態に戻すことができます。

## 🛠️ 技術スタック

- **フレームワーク:** React, TypeScript
- **スタイリング:** Tailwind CSS (via CDN)
- **AIモデル:** Google Gemini API (`gemini-2.5-flash`)
- **テキスト読み上げ (TTS):** Fish Audio API
- **音声入力 (STT):** Web Speech API
- **依存関係:** `importmap` を使用してCDNから直接読み込み（ビルド不要）

## 🚀 はじめに

このプロジェクトは、ビルドプロセスを必要としない純粋なフロントエンドアプリケーションです。`index.html`ファイルをブラウザで開くだけで実行できます。

### APIキーの設定

これは最も重要なステップです。有効なAPIキーがないと、アプリケーションは機能しません。アプリケーションを実行する環境で、以下の環境変数を設定してください。

- **Google Gemini APIキー (必須):**
  - **変数名:** `API_KEY`
  - **説明:** アプリケーションのすべてのAI機能に必要です。このキーはクライアントサイドで直接使用されるため、信頼できる環境でのみアプリケーションをホストしてください。

- **Fish Audio TTS (任意):**
  ユーザーがテキスト読み上げ機能を使用したい場合、アプリ内の「音声管理」モーダルから手動でFish Audioの認証情報を追加できます。認証情報はブラウザのローカルストレージに安全に保存されます。

### アプリケーションの実行

このプロジェクトはビルドステップを必要としません。
すべての依存関係は`index.html`内の`importmap`を通じてCDNから直接読み込まれます。
静的ファイルをホストできる任意の環境（GitHub Pages、Netlify、Vercelの静的デプロイなど）にファイルを配置するだけで、アプリケーションは動作します。

## 📁 ファイル構成

```
.
├── components/
│   # (Reactコンポーネント)
├── services/
│   └── geminiService.ts    # Google Gemini APIを直接呼び出すクライアントサイドサービス
├── types.ts                # アプリケーションのTypeScript型定義
├── index.html              # メインのHTMLエントリーポイント（importmapを含む）
├── index.tsx               # Reactアプリケーションのエントリーポイント
└── metadata.json           # アプリケーションのメタデータ（権限など）
```
